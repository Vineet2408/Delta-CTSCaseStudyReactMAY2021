{"ast":null,"code":"var _jsxFileName = \"G:\\\\ProjectWork\\\\Cognizant\\\\DeltaLearning\\\\ReactCaseStudyMay2021\\\\bms\\\\src\\\\pages\\\\CustomerProfile.js\";\nimport Customer from '../components/customer/Customer';\nimport Loans from '../components/customer/Loans';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getAllLoan, getAllUser } from '../store/services/userService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CustomerProfile extends Component {\n  constructor() {\n    super();\n    this.user = {};\n    this.loans = [];\n    this.state = {\n      loans: []\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      if (this.props.token) {\n        await this.props.dispatch(getAllUser(this.props.token));\n        console.log(\"dispatched\");\n        let arr = this.props.users;\n\n        for (let i = 0; i < arr.length; i++) {\n          let user = arr[i];\n\n          if (user.email) {\n            if (user.email === this.props.loggedInUser.email) {\n              this.user = user;\n              break;\n            }\n          }\n        }\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-danger\",\n            children: \"Login Not Succesfull!!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-warning\",\n            onClick: () => {\n              this.props.history.push(\"/login\");\n            },\n            children: \"Try Again!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this);\n      }\n    } catch (err) {\n      console.log(err.message);\n    }\n\n    await this.props.dispatch(getAllLoan(this.props.token));\n    console.log(this.props.loans);\n    let loanList = [];\n\n    for (let i = 0; i < this.props.loans.length; i++) {\n      if (this.props.loans[i].email === this.props.loggedInUser.email) {\n        loanList.push(this.props.loans[i]);\n      }\n    }\n\n    this.setState(state => {\n      state.loans = loanList;\n    });\n  }\n\n  render() {\n    console.log('profile props = ', this.props);\n    console.log('state loans = ', this.state.loans);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-5 bg-dark text-white\",\n        children: [this.user && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-decoration-underline\",\n            children: \"Customer Detail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Customer, {\n            user: this.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 41\n        }, this), this.loans && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-decoration-underline\",\n            children: \" Loans Applied By Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Loans, {\n            loans: this.state.loans\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log('state = ', state);\n  console.log('users = ', state.users);\n  console.log('token = ', ' ', state.users.token);\n  console.log('state.token ', state.token);\n  return { ...state.users\n  };\n};\n\nexport default connect(mapStateToProps)(CustomerProfile);","map":{"version":3,"sources":["G:/ProjectWork/Cognizant/DeltaLearning/ReactCaseStudyMay2021/bms/src/pages/CustomerProfile.js"],"names":["Customer","Loans","React","Component","connect","getAllLoan","getAllUser","CustomerProfile","constructor","user","loans","state","componentDidMount","props","token","dispatch","console","log","arr","users","i","length","email","loggedInUser","history","push","err","message","loanList","setState","render","mapStateToProps"],"mappings":"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","sourcesContent":["import Customer from '../components/customer/Customer';\r\nimport Loans from '../components/customer/Loans';\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { getAllLoan, getAllUser } from '../store/services/userService';\r\nclass CustomerProfile extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.user = {};\r\n        this.loans=[];\r\n        this.state={\r\n            loans:[]\r\n        }\r\n    }\r\n    async componentDidMount() {\r\n        try {\r\n            if (this.props.token) {\r\n                await this.props.dispatch(getAllUser(this.props.token));\r\n                console.log(\"dispatched\");\r\n                let arr = this.props.users;\r\n                for (let i = 0; i < arr.length; i++) {\r\n                    let user = arr[i];\r\n                    if (user.email) {\r\n                        if (user.email === this.props.loggedInUser.email) {\r\n                            this.user = user;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                return (\r\n                    <div className=\"container mt-5\">\r\n                        <h2 className=\"text-danger\">Login Not Succesfull!!</h2>\r\n                        <button className=\"btn btn-warning\"\r\n                            onClick={() => { this.props.history.push(\"/login\") }}>\r\n                            Try Again!\r\n                        </button>\r\n                    </div>);\r\n\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.log(err.message);\r\n        }\r\n        await this.props.dispatch(getAllLoan(this.props.token));\r\n\r\n        console.log(this.props.loans)\r\n        let loanList = [];\r\n        for (let i = 0; i < this.props.loans.length; i++) {\r\n            if (this.props.loans[i].email === this.props.loggedInUser.email) {\r\n                loanList.push(this.props.loans[i]);\r\n            }\r\n        }\r\n        this.setState((state)=>{\r\n            state.loans=loanList\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log('profile props = ', this.props);\r\n        console.log('state loans = ',this.state.loans);\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"container mt-5 bg-dark text-white\">\r\n\r\n                    {\r\n                        (this.user) && (<div className=\"row\">\r\n                            <h1 className=\"text-decoration-underline\">Customer Detail</h1>\r\n                            <Customer user={this.user} />\r\n                        </div>)\r\n                    }\r\n                    {\r\n                        (this.loans) && (\r\n                            <div className=\"row\">\r\n                                <h3 className=\"text-decoration-underline\"> Loans Applied By Customer</h3>\r\n                                <Loans loans={this.state.loans}></Loans>\r\n                            </div>\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    console.log('state = ', state);\r\n    console.log('users = ', state.users);\r\n    console.log('token = ', ' ', state.users.token)\r\n    console.log('state.token ', state.token);\r\n    return {\r\n        ...state.users\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CustomerProfile);\r\n"]},"metadata":{},"sourceType":"module"}